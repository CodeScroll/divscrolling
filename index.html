<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap 5 Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <style>

    html{scrollbar-width: thin;}

    .section{
        height: 100%;
        min-height: 100vh;
        display: block;
    }

    #section_1{
        background-color: #B75861;
    }

    #section_2{
        background-color: #54BF97;
    }

    #section_3{
        background-color: #D2B93C;
    }

    #section_4{
        background-color: #48A3E5;
    }
  </style>
</head>
<body>

    <div class="section" id="section_1" data-id="1"></div>
    <div class="section" id="section_2" data-id="3"></div>
    <div class="section" id="section_3" data-id="3"></div>
    <div class="section" id="section_4" data-id="4"></div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>

        var sections = ['section_1','section_2','section_3','section_4'];
        var debug = true;
        var activeSection = sections[0];
        var lastScrollTop = 0, isScrolling = true;
        var sectionScrollDuration = 1000;

        isScrollToFinished();
        window.scrollTo(0,0);

        function isScrollToFinished() {
            const checkIfScrollToIsFinished = setInterval(() => {

                if (window.scrollY == 0) {
                    isScrolling = false;
                    onScroll();
                    clearInterval(checkIfScrollToIsFinished);
                }

            }, 25);
        }

        function onScroll(){

            window.addEventListener("scroll", function(e){
                var st = window.pageYOffset || document.documentElement.scrollTop;
                if (st > lastScrollTop) {
                    // downscroll code
                    if(isScrolling == false){
                        let toDivId = nextSection();
                        if(toDivId != '')
                            scrollToSection(toDivId);

                    }

                    if(debug)
                        console.log('scrolled down');
                    
                } else if (st < lastScrollTop) {
                    // upscroll code
                    if(isScrolling == false){
                        let toDivId = previousSection();
                        if(toDivId != '')
                            scrollToSection(toDivId);

                    }

                    if(debug)
                        console.log('scrolled up');

                } // else was horizontal scroll

                lastScrollTop = st <= 0 ? 0 : st; // For Mobile or negative scrolling   

            }, false);   
        }

        function nextSection(){

            var nextItem = '';
            index = sections.indexOf(activeSection);

            if(index >= 0 && index < sections.length - 1)
                nextItem = sections[index + 1];

            if(nextItem != '')
                activeSection = nextItem;

            return nextItem;
        }

        function previousSection(){

            var previousItem = '';

            index = sections.indexOf(activeSection);
            if(index > 0)
                previousItem = sections[index - 1];

            if(previousItem != '')
                activeSection = previousItem;

            return previousItem;
        }

        function scrollToSection(section){
            isScrolling = true;
            $('body').css('overflow', 'hidden');
            setTimeout(function(){
                isScrolling = false;
                $('body').css('overflow', 'auto');
            }, sectionScrollDuration*1.5);

            $([document.documentElement, document.body]).animate({scrollTop: $("#"+section).offset().top}, sectionScrollDuration);
        }
    </script>
</body>
</html>
